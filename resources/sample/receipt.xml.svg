<svg version="1.1" xmlns="http://www.w3.org/2000/svg" height="1440" width="1060"><g transform="translate(0 0)"><g transform="translate(10 10)" id="state-enter/start"><path d="M 7.5 0 L 52.5 0 A 7.5 7.5 0 0 1 52.5 15 L 7.5 15 A 7.5 7.5 0 0 1 7.5 0" fill="white" stroke="#000000"/><text x="5" y="10" fill="#000000" font-size="10" font-family="sans-serif">start</text></g><g transform="translate(80 60)" id="state-decision/onEnter"><path d="M 0 20 L 40 0 L 80 20 L 40 40 z" fill="#CCCCFF" stroke="#000000"/><text x="20" y="15" fill="#000000" font-size="10" font-family="sans-serif">onEnter</text><text x="20" y="25" font-size="10" font-family="sans-serif">(Enter)</text></g><g id="connector-forward/undefined"><path d="M 40 25 L 40 65 A 15 15 0 0 0 55 80 L 80 80" fill="none" stroke="#000000"/><path d="M 80 80 L 70 75 L 70 85 Z"/><text x="45" y="55" font-size="10" font-family="sans-serif"/></g><g transform="translate(160 120)" id="state-decision/loadHistory"><path d="M 0 20 L 40 0 L 80 20 L 40 40 z" fill="#CCCCFF" stroke="#000000"/><text x="20" y="15" fill="#000000" font-size="10" font-family="sans-serif">loadHistory</text><text x="20" y="25" font-size="10" font-family="sans-serif">(Load history data)</text></g><g id="connector-forward/to-next"><path d="M 120 100 L 120 125 A 15 15 0 0 0 135 140 L 160 140" fill="none" stroke="#000000"/><path d="M 160 140 L 150 135 L 150 145 Z"/><text x="125" y="105" font-size="10" font-family="sans-serif"><tspan x="125" dy="10">to-next</tspan></text></g><g transform="translate(240 180)" id="state-decision/doFraudmonConfirm"><path d="M 0 20 L 40 0 L 80 20 L 40 40 z" fill="#CCCCFF" stroke="#000000"/><text x="20" y="15" fill="#000000" font-size="10" font-family="sans-serif">doFraudmonConfirm</text><text x="20" y="25" font-size="10" font-family="sans-serif">(Do fraudmon confirm)</text></g><g id="connector-forward/to-next"><path d="M 200 160 L 200 185 A 15 15 0 0 0 215 200 L 240 200" fill="none" stroke="#000000"/><path d="M 240 200 L 230 195 L 230 205 Z"/><text x="205" y="165" font-size="10" font-family="sans-serif"><tspan x="205" dy="10">to-next</tspan></text></g><g transform="translate(320 240)" id="state-decision/prepareDataForNext"><path d="M 0 20 L 40 0 L 80 20 L 40 40 z" fill="#CCCCFF" stroke="#000000"/><text x="20" y="15" fill="#000000" font-size="10" font-family="sans-serif">prepareDataForNext</text><text x="20" y="25" font-size="10" font-family="sans-serif">(Store data for print)</text></g><g id="connector-forward/to-next"><path d="M 280 220 L 280 245 A 15 15 0 0 0 295 260 L 320 260" fill="none" stroke="#000000"/><path d="M 320 260 L 310 255 L 310 265 Z"/><text x="285" y="225" font-size="10" font-family="sans-serif"><tspan x="285" dy="10">to-next</tspan></text></g><g transform="translate(400 300)" id="state-process/showReceipt"><rect x="0" y="0" width="80" height="40" rx="2.5" ry="2.5" fill="#CCCCFF" stroke="#000000"/><text x="5" y="15" fill="#000000" font-size="10" font-family="sans-serif">showReceipt</text><text x="5" y="25" font-size="10" font-family="sans-serif">(Show receipt)</text></g><g id="connector-forward/to-next"><path d="M 360 280 L 360 305 A 15 15 0 0 0 375 320 L 400 320" fill="none" stroke="#000000"/><path d="M 400 320 L 390 315 L 390 325 Z"/><text x="365" y="285" font-size="10" font-family="sans-serif"><tspan x="365" dy="10">to-next</tspan></text></g><g transform="translate(480 360)" id="state-end/end"><path d="M 7.5 0 L 52.5 0 A 7.5 7.5 0 0 1 52.5 15 L 7.5 15 A 7.5 7.5 0 0 1 7.5 0" fill="white" stroke="#000000"/><text x="5" y="10" fill="#000000" font-size="10" font-family="sans-serif">end</text></g><g id="connector-forward/to-end"><path d="M 440 340 L 440 352.5 A 15 15 0 0 0 455 367.5 L 480 367.5" fill="none" stroke="#000000"/><path d="M 480 367.5 L 470 362.5 L 470 372.5 Z"/><text x="445" y="345" font-size="10" font-family="sans-serif"><tspan x="445" dy="10">to-end</tspan></text></g><g transform="translate(480 420)" id="state-decision/reloadData"><path d="M 0 20 L 40 0 L 80 20 L 40 40 z" fill="#CCCCFF" stroke="#000000"/><text x="20" y="15" fill="#000000" font-size="10" font-family="sans-serif">reloadData</text><text x="20" y="25" font-size="10" font-family="sans-serif">(Reload data if changed)</text></g><g id="connector-forward/to-reload, to-next"><path d="M 440 340 L 440 425 A 15 15 0 0 0 455 440 L 480 440" fill="none" stroke="#000000"/><path d="M 480 440 L 470 435 L 470 445 Z"/><text x="445" y="395" font-size="10" font-family="sans-serif"><tspan x="445" dy="10">to-reload,</tspan><tspan x="445" dy="10">to-next</tspan></text></g><g id="connector-backward/to-next"><path d="M 520 420 A 15 7.5 0 0 1 535 412.5 L 560 412.5 A 15 15 0 0 0 575 397.5 L 575 335 A 15 15 0 0 0 560 320 L 480 320" fill="none" stroke="#000000"/><path d="M 480 320 L 490 315 L 490 325 z" fill="#000000" stroke="#000000"/><text x="580" y="325" font-size="10" font-family="sans-serif"><tspan x="580" dy="10">to-next</tspan></text></g><g transform="translate(560 480)" id="state-process/showDefaultError"><rect x="0" y="0" width="80" height="40" rx="2.5" ry="2.5" fill="#CCCCFF" stroke="#000000"/><text x="5" y="15" fill="#000000" font-size="10" font-family="sans-serif">showDefaultError</text><text x="5" y="25" font-size="10" font-family="sans-serif">(Show error)</text></g><g id="connector-forward/to-error"><path d="M 520 460 L 520 485 A 15 15 0 0 0 535 500 L 560 500" fill="none" stroke="#000000"/><path d="M 560 500 L 550 495 L 550 505 Z"/><text x="525" y="465" font-size="10" font-family="sans-serif"><tspan x="525" dy="10">to-error</tspan></text></g><g transform="translate(640 540)" id="state-end/end"><path d="M 7.5 0 L 52.5 0 A 7.5 7.5 0 0 1 52.5 15 L 7.5 15 A 7.5 7.5 0 0 1 7.5 0" fill="white" stroke="#000000"/><text x="5" y="10" fill="#000000" font-size="10" font-family="sans-serif">end</text></g><g id="connector-forward/#link?"><path d="M 600 520 L 600 532.5 A 15 15 0 0 0 615 547.5 L 640 547.5" fill="none" stroke="#000000"/><path d="M 640 547.5 L 630 542.5 L 630 552.5 Z"/><text x="605" y="525" font-size="10" font-family="sans-serif"><tspan x="605" dy="10">#link?</tspan></text></g><g transform="translate(480 600)" id="state-decision/processStornoError"><path d="M 0 20 L 40 0 L 80 20 L 40 40 z" fill="#CCCCFF" stroke="#000000"/><text x="20" y="15" fill="#000000" font-size="10" font-family="sans-serif">processStornoError</text><text x="20" y="25" font-size="10" font-family="sans-serif"></text></g><g id="connector-forward/to-error"><path d="M 440 340 L 440 605 A 15 15 0 0 0 455 620 L 480 620" fill="none" stroke="#000000"/><path d="M 480 620 L 470 615 L 470 625 Z"/><text x="445" y="585" font-size="10" font-family="sans-serif"><tspan x="445" dy="10">to-error</tspan></text></g><g transform="translate(560 660)" id="state-process/showInvalidInputParamsError"><rect x="0" y="0" width="80" height="40" rx="2.5" ry="2.5" fill="#CCCCFF" stroke="#000000"/><text x="5" y="15" fill="#000000" font-size="10" font-family="sans-serif">showInvalidInputParamsError</text><text x="5" y="25" font-size="10" font-family="sans-serif">(Show fraudmon error)</text></g><g id="connector-forward/to-invalid-input-params"><path d="M 520 640 L 520 665 A 15 15 0 0 0 535 680 L 560 680" fill="none" stroke="#000000"/><path d="M 560 680 L 550 675 L 550 685 Z"/><text x="525" y="645" font-size="10" font-family="sans-serif"><tspan x="525" dy="10" font-size="6.521739130434782">to-invalid-input-params</tspan></text></g><g transform="translate(640 720)" id="state-end/end"><path d="M 7.5 0 L 52.5 0 A 7.5 7.5 0 0 1 52.5 15 L 7.5 15 A 7.5 7.5 0 0 1 7.5 0" fill="white" stroke="#000000"/><text x="5" y="10" fill="#000000" font-size="10" font-family="sans-serif">end</text></g><g id="connector-forward/to-end"><path d="M 600 700 L 600 712.5 A 15 15 0 0 0 615 727.5 L 640 727.5" fill="none" stroke="#000000"/><path d="M 640 727.5 L 630 722.5 L 630 732.5 Z"/><text x="605" y="705" font-size="10" font-family="sans-serif"><tspan x="605" dy="10">to-end</tspan></text></g><g id="connector-backward/to-error"><path d="M 520 600 A 15 7.5 0 0 1 535 592.5 L 720 592.5 A 15 15 0 0 0 735 577.5 L 735 515 A 15 15 0 0 0 720 500 L 640 500" fill="none" stroke="#000000"/><path d="M 640 500 L 650 495 L 650 505 z" fill="#000000" stroke="#000000"/><text x="740" y="505" font-size="10" font-family="sans-serif"><tspan x="740" dy="10">to-error</tspan></text></g><g transform="translate(560 780)" id="state-process/showFeatureOff"><rect x="0" y="0" width="80" height="40" rx="2.5" ry="2.5" fill="#CCCCFF" stroke="#000000"/><text x="5" y="15" fill="#000000" font-size="10" font-family="sans-serif">showFeatureOff</text><text x="5" y="25" font-size="10" font-family="sans-serif">(Show service off error)</text></g><g id="connector-forward/to-feature-off"><path d="M 520 640 L 520 785 A 15 15 0 0 0 535 800 L 560 800" fill="none" stroke="#000000"/><path d="M 560 800 L 550 795 L 550 805 Z"/><text x="525" y="765" font-size="10" font-family="sans-serif"><tspan x="525" dy="10">to-feature-off</tspan></text></g><g transform="translate(640 840)" id="state-end/end"><path d="M 7.5 0 L 52.5 0 A 7.5 7.5 0 0 1 52.5 15 L 7.5 15 A 7.5 7.5 0 0 1 7.5 0" fill="white" stroke="#000000"/><text x="5" y="10" fill="#000000" font-size="10" font-family="sans-serif">end</text></g><g id="connector-forward/to-end"><path d="M 600 820 L 600 832.5 A 15 15 0 0 0 615 847.5 L 640 847.5" fill="none" stroke="#000000"/><path d="M 640 847.5 L 630 842.5 L 630 852.5 Z"/><text x="605" y="825" font-size="10" font-family="sans-serif"><tspan x="605" dy="10">to-end</tspan></text></g><g transform="translate(560 900)" id="state-decision/showTechBreakError"><path d="M 0 20 L 40 0 L 80 20 L 40 40 z" fill="#CCCCFF" stroke="#000000"/><text x="20" y="15" fill="#000000" font-size="10" font-family="sans-serif">showTechBreakError</text><text x="20" y="25" font-size="10" font-family="sans-serif">(Show not found error)</text></g><g id="connector-forward/to-show-tb-error"><path d="M 520 640 L 520 905 A 15 15 0 0 0 535 920 L 560 920" fill="none" stroke="#000000"/><path d="M 560 920 L 550 915 L 550 925 Z"/><text x="525" y="885" font-size="10" font-family="sans-serif"><tspan x="525" dy="10" font-size="9.375">to-show-tb-error</tspan></text></g><g transform="translate(640 960)" id="state-end/end"><path d="M 7.5 0 L 52.5 0 A 7.5 7.5 0 0 1 52.5 15 L 7.5 15 A 7.5 7.5 0 0 1 7.5 0" fill="white" stroke="#000000"/><text x="5" y="10" fill="#000000" font-size="10" font-family="sans-serif">end</text></g><g id="connector-forward/to-end"><path d="M 600 940 L 600 952.5 A 15 15 0 0 0 615 967.5 L 640 967.5" fill="none" stroke="#000000"/><path d="M 640 967.5 L 630 962.5 L 630 972.5 Z"/><text x="605" y="945" font-size="10" font-family="sans-serif"><tspan x="605" dy="10">to-end</tspan></text></g><g id="connector-backward/очень-очень-очень-очень длинный-нэйм"><path d="M 600 900 A 15 7.5 0 0 1 615 892.5 L 720 892.5 A 15 15 0 0 0 735 877.5 L 735 815 A 15 15 0 0 0 720 800 L 640 800" fill="none" stroke="#000000"/><path d="M 640 800 L 650 795 L 650 805 z" fill="#000000" stroke="#000000"/><text x="740" y="795" font-size="10" font-family="sans-serif"><tspan x="740" dy="10" font-size="6.521739130434782">очень-очень-очень-очень</tspan><tspan x="740" dy="10">длинный-нэйм</tspan></text></g><g transform="translate(480 1020)" id="state-process/showReceiptAgain"><rect x="0" y="0" width="80" height="40" rx="2.5" ry="2.5" fill="#CCCCFF" stroke="#000000"/><text x="5" y="15" fill="#000000" font-size="10" font-family="sans-serif">showReceiptAgain</text><text x="5" y="25" font-size="10" font-family="sans-serif">(stub step showReceipt)</text></g><g id="connector-forward/to-back"><path d="M 440 340 L 440 1025 A 15 15 0 0 0 455 1040 L 480 1040" fill="none" stroke="#000000"/><path d="M 480 1040 L 470 1035 L 470 1045 Z"/><text x="445" y="1005" font-size="10" font-family="sans-serif"><tspan x="445" dy="10">to-back</tspan></text></g><g id="connector-backward/to-next"><path d="M 520 1020 A 15 7.5 0 0 1 535 1012.5 L 800 1012.5 A 15 15 0 0 0 815 997.5 L 815 335 A 15 15 0 0 0 800 320 L 480 320" fill="none" stroke="#000000"/><path d="M 480 320 L 490 315 L 490 325 z" fill="#000000" stroke="#000000"/><text x="820" y="325" font-size="10" font-family="sans-serif"><tspan x="820" dy="10">to-next</tspan></text></g><g transform="translate(480 1080)" id="state-external/#StornoCard"><path d="M 0 0 L 70 0 L 80 20 L 70 40 L 0 40 z" fill="#CCCCFF" stroke="#000000"/><text x="5" y="15" fill="#000000" font-size="10" font-family="sans-serif">#StornoCard</text><text x="5" y="25" font-size="10" font-family="sans-serif"></text></g><g id="connector-forward/stornoCard"><path d="M 440 340 L 440 1085 A 15 15 0 0 0 455 1100 L 480 1100" fill="none" stroke="#000000"/><path d="M 480 1100 L 470 1095 L 470 1105 Z"/><text x="445" y="1065" font-size="10" font-family="sans-serif"><tspan x="445" dy="10">stornoCard</tspan></text></g><g id="connector-backward/#return"><path d="M 520 1080 A 15 7.5 0 0 1 535 1072.5 L 880 1072.5 A 15 15 0 0 0 895 1057.5 L 895 335 A 15 15 0 0 0 880 320 L 480 320" fill="none" stroke="#000000"/><path d="M 480 320 L 490 315 L 490 325 z" fill="#000000" stroke="#000000"/><text x="900" y="325" font-size="10" font-family="sans-serif"><tspan x="900" dy="10">#return</tspan></text></g><g transform="translate(480 1140)" id="state-external/#StornoCash"><path d="M 0 0 L 70 0 L 80 20 L 70 40 L 0 40 z" fill="#CCCCFF" stroke="#000000"/><text x="5" y="15" fill="#000000" font-size="10" font-family="sans-serif">#StornoCash</text><text x="5" y="25" font-size="10" font-family="sans-serif"></text></g><g id="connector-forward/stornoCash"><path d="M 440 340 L 440 1145 A 15 15 0 0 0 455 1160 L 480 1160" fill="none" stroke="#000000"/><path d="M 480 1160 L 470 1155 L 470 1165 Z"/><text x="445" y="1125" font-size="10" font-family="sans-serif"><tspan x="445" dy="10">stornoCash</tspan></text></g><g id="connector-backward/#return"><path d="M 520 1140 A 15 7.5 0 0 1 535 1132.5 L 960 1132.5 A 15 15 0 0 0 975 1117.5 L 975 335 A 15 15 0 0 0 960 320 L 480 320" fill="none" stroke="#000000"/><path d="M 480 320 L 490 315 L 490 325 z" fill="#000000" stroke="#000000"/><text x="980" y="325" font-size="10" font-family="sans-serif"><tspan x="980" dy="10">#return</tspan></text></g><g id="connector-forward/to-error"><path d="M 360 280 L 360 485 A 15 15 0 0 0 375 500 L 560 500" fill="none" stroke="#000000"/><path d="M 560 500 L 550 495 L 550 505 Z"/><text x="365" y="465" font-size="10" font-family="sans-serif"><tspan x="365" dy="10">to-error</tspan></text></g><g id="connector-backward/to-doFraudmonConfirm"><path d="M 360 240 A 15 7.5 0 0 1 375 232.5 L 400 232.5 A 15 15 0 0 0 415 217.5 L 415 215 A 15 15 0 0 0 400 200 L 320 200" fill="none" stroke="#000000"/><path d="M 320 200 L 330 195 L 330 205 z" fill="#000000" stroke="#000000"/><text x="420" y="205" font-size="10" font-family="sans-serif"><tspan x="420" dy="10" font-size="7.5">to-doFraudmonConfirm</tspan></text></g><g transform="translate(320 1200)" id="state-process/showFraudmonError"><rect x="0" y="0" width="80" height="40" rx="2.5" ry="2.5" fill="#CCCCFF" stroke="#000000"/><text x="5" y="15" fill="#000000" font-size="10" font-family="sans-serif">showFraudmonError</text><text x="5" y="25" font-size="10" font-family="sans-serif">(Show fraudmon error)</text></g><g id="connector-forward/to-error"><path d="M 280 220 L 280 1205 A 15 15 0 0 0 295 1220 L 320 1220" fill="none" stroke="#000000"/><path d="M 320 1220 L 310 1215 L 310 1225 Z"/><text x="285" y="1185" font-size="10" font-family="sans-serif"><tspan x="285" dy="10">to-error</tspan></text></g><g transform="translate(400 1260)" id="state-end/end"><path d="M 7.5 0 L 52.5 0 A 7.5 7.5 0 0 1 52.5 15 L 7.5 15 A 7.5 7.5 0 0 1 7.5 0" fill="white" stroke="#000000"/><text x="5" y="10" fill="#000000" font-size="10" font-family="sans-serif">end</text></g><g id="connector-forward/to-end"><path d="M 360 1240 L 360 1252.5 A 15 15 0 0 0 375 1267.5 L 400 1267.5" fill="none" stroke="#000000"/><path d="M 400 1267.5 L 390 1262.5 L 390 1272.5 Z"/><text x="365" y="1245" font-size="10" font-family="sans-serif"><tspan x="365" dy="10">to-end</tspan></text></g><g transform="translate(240 1320)" id="state-process/showHistoryNotFoundError"><rect x="0" y="0" width="80" height="40" rx="2.5" ry="2.5" fill="#CCCCFF" stroke="#000000"/><text x="5" y="15" fill="#000000" font-size="10" font-family="sans-serif">showHistoryNotFoundError</text><text x="5" y="25" font-size="10" font-family="sans-serif">(Show error)</text></g><g id="connector-forward/to-error"><path d="M 200 160 L 200 1325 A 15 15 0 0 0 215 1340 L 240 1340" fill="none" stroke="#000000"/><path d="M 240 1340 L 230 1335 L 230 1345 Z"/><text x="205" y="1305" font-size="10" font-family="sans-serif"><tspan x="205" dy="10">to-error</tspan></text></g><g transform="translate(320 1380)" id="state-end/end"><path d="M 7.5 0 L 52.5 0 A 7.5 7.5 0 0 1 52.5 15 L 7.5 15 A 7.5 7.5 0 0 1 7.5 0" fill="white" stroke="#000000"/><text x="5" y="10" fill="#000000" font-size="10" font-family="sans-serif">end</text></g><g id="connector-forward/to-end"><path d="M 280 1360 L 280 1372.5 A 15 15 0 0 0 295 1387.5 L 320 1387.5" fill="none" stroke="#000000"/><path d="M 320 1387.5 L 310 1382.5 L 310 1392.5 Z"/><text x="285" y="1365" font-size="10" font-family="sans-serif"><tspan x="285" dy="10">to-end</tspan></text></g><g id="connector-forward/to-error"><path d="M 120 100 L 120 665 A 15 15 0 0 0 135 680 L 560 680" fill="none" stroke="#000000"/><path d="M 560 680 L 550 675 L 550 685 Z"/><text x="125" y="645" font-size="10" font-family="sans-serif"><tspan x="125" dy="10">to-error</tspan></text></g><g id="connector-forward/to-feature-off"><path d="M 120 100 L 120 785 A 15 15 0 0 0 135 800 L 560 800" fill="none" stroke="#000000"/><path d="M 560 800 L 550 795 L 550 805 Z"/><text x="125" y="765" font-size="10" font-family="sans-serif"><tspan x="125" dy="10">to-feature-off</tspan></text></g></g></svg>